#  集群为什么一般是奇数个

首先是并没有任何规定必须要奇数个，只是在容错情况是一致的，为了节省成本干脆就用奇数个。比如 3个节点的集群和4个节点的集群都只能容忍1个节点挂掉。

根据常见的一致性算法 Paxos和 Raft 等选主过程都需要节点得票数**超过 50%**，注意是**超过50%**。等于也是不行的。

**3 个节点的集群中**，每个节权重为 33.3%。

挂掉一个节点后剩余总权重为 66.6%，当剩余两个节点选主时都投同一个节点时，是可以选主成功的（多选几次，总能成功）。如果挂掉两个，就只有33.3%权重了，怎么投票都不可能选主成功。所以说 3节点集群容错 1个节点。

**4个节点集群中**，每个节点权重25%。

挂掉一个节点后，剩余总权重为 75%，当剩余三个节点选主时都投同一个节点时，也是可以选主成功的（肯定要比上面三节点集群会麻烦一些）。

挂掉两个节点后，剩余总权重为 50%，不超过 50%，不能选主成功。

所以 4 节点集群容错也是 1 节点。

所以 2n+1 个节点的集群，容错为 n。