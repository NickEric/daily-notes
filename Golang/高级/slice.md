# Slice



## 扩容

Slice 扩容分为3个步骤。

**步骤一：确定新容量**

* 1）**规则一**：旧容量*2 也小于所需容量也直接扩容到所需容量，否则进入规则二。
* 2）**规则二**：旧容量小于1024 则直接翻倍，大于则扩大 1/4，即扩大为旧容量的 1.25 倍。

**步骤二：分配内存**

扩容后还要根据元素类型确定需要的内存大小。
比如 int64 占 8 字节，如果扩容后容量为 10 则需要 8*10=80 字节内存。但是 Go 语言的 内存分配 模块只提供固定规格的内存。比如 8 16 32 48 64 这样的规格，所以这个 80 字节申请时会得到一个 96 字节的空间。

**步骤三：确定最终容量**

步骤二中申请得到了 96 字节内存，然后每个元素占 8 字节，所以最终的容量就是 96/8=12。

