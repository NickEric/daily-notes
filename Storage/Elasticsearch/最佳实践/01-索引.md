# Index



## 1. 分片

分片数需要提前设定好，否则后续无法扩展。

```http
PUT my-index-000001
{
  "settings": {
    "number_of_shards": 1,
    "number_of_replicas": 1,
  }
}
```



## 2. 分词器

Index 时按照最细粒度分词，以便 Search 时能匹配到更多的文档。

Search 时按最粗粒度分词，以提升精确度。

> default 指定 索引时的 analyzer  default_search 则指定搜索时的 analyzer

```http
PUT my-index-000001
{
  "settings": {
    "analysis": {
      "analyzer": {
        "default": {
          "type": "ik_max_word"
        },
         "default_search": {
          "type": "ik_mark"
        }
      }
    }
  }
}
```



## 3. Mapping

先不创建 Mapping，直接创建一个临时索引。

然后写入一些文档，利用 Dynamic Mapping 机制自动生成 Mapping。

然后在自动生成的 Mapping 上进行修改。