# 第一部分小结

## 1. 第一部分

### 1. 问题

* 1）判断题 - ES 支持使用 HTTP PUT 写入新文档，并通过 ES 自动生成文档 id
* 2）判断题  - Update 一个文档，需要使用 HTTP PUT
* 3）判断题 - Index 一个已存在的文档，旧的文档会先被删除，新的文档在被写入，同时版本好 +1
* 4）尝试描述创建一个新的文档到一个不存在的索引中，背后会发生什么
* 5）ES 7 中 合法的 type 是什么？
* 6）精确值和全文本的本质区别是什么？
* 7）Analyzer 由哪几个部分组成



### 2. 答案

* 1）错，POST 才会自动生成 id，PUT 需要指定 id
* 2）错，Update 文档使用 POST，PUT 是 index
* 3）对
* 4）默认情况下，会创建相应的索引，并且自己设置 Mapping，如果有合适的 Index Template 也会使用
* 5）ES 7 中合法 type 只有一个 就是`_doc`
* 6）精确值不会被 Analyzer 分词，全文本会
* 7）三部分，Character Filter、Tokenizer、Token Filter



## 2. 第二部分

### 1. 问题

* 1）尝试描述 match 和 match_phrase 的区别
* 2）如果希望 match_phrase 匹配更多结果，应该在查询中增加什么参数？、
* 3）如果 Mapping 的 dynamic 设置为 `strict`时，索引一个包含新增字段的文档时会发生什么
* 4）如果 Mapping 的 dynamic 设置为 `false`时，索引一个包含新增字段的文档时会发生什么
* 5）判断题 - 可以把一个字段的类型从 integer 改成 long，这两个类型是兼容的
* 6）判断题 - 你可以在 Mapping 文件中为 indexing 和 searching 指定不同的 Analyzer
* 7）判断题 - 字段类型为 Text 的字段，一定可以被全文搜索



### 2. 答案

* 1）match 中 terms 之间是 or 关系，match_phrase 中 terms 之间是 and 关系，并且 terms 的位置也影响搜索结果。
* 2） slop - 运行搜索结果与指定字符串之间有一定间隔
* 3） strict 模式下直接报错，无法写入文档
* 4）false 模式下，可以插入，但是新增的字段无法被搜索到（因为没有更新 mapping）
* 5）错 - 字段类型修改，需要执行 reindex
* 6）对，可以指定
* 7）错，可以为字段（任何字段都可以）指定 Not Indexed，使其无法被搜索

