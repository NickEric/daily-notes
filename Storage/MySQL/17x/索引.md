# 索引

## 数据结构

* 二叉树
  * 树高度太高，查询效率低
* 红黑树
  * 树高度太高，查询效率低
* Hash
  * 单个查询快，但是无法满足范围查询

* B-Tree
* B+Tree

MySQL 使用的是 B-Tree 的变种，B+Tree，主要区别

* 非叶子节点不存储数据，只存索引（每个节点可以存储更多索引，降低树高度）
* 叶子节点包含所有数据
* 叶子节点用指针连接，提高区间访问性能。

## 问题

* 1）为什么 InnoDB 引擎表必须有主键？

需要根据主键来组织索引结构，没有手动指定主键时，InnoDB存储引擎会自动创建隐藏列（rowid）作为主键。

* 2）为什么推荐使用整形且自增的主键？

整形：索引查找过程中需要多次比较大小，整形效率高。

自增：自增的整形是连续的，如果用不连续的主键可能会出现B+Tree节点分裂（也叫页分裂）问题（B+Tree 叶子节点需要维护节点数据的顺序）。



## 联合索引

一般不推荐使用多个单字段阶段，而是推荐使用联合索引。

* 1）联合索引有多字段如何排序？

根据字段先后顺序，分别进行比对，若前面的字段无法区分大小则继续比后面的字段。

> 所以才会有**最左前缀原则**。

